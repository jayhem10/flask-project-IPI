{% extends "base.html" %}

{% block title %} Index {% endblock %}

{% block content %}

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class="container flashes">
    {% for message in messages %}
      <li>{{ message }}</li>
    {% endfor %}
    </ul>
  {% endif %}
{% endwith %}


<!-- Header -->
<header id="header" class="alt">
	<div class="inner">
		<h1>Votre profil</h1>
		<h2>Retrouvez vos informations et vos cours ici</h2>
		<div class="container text-center my-5">
			<a href="{{ url_for('home')}}" class="btn btn-outline-dark text-center" role="button"
				aria-pressed="true">HOME</a>
		</div>
	</div>
</header>

<!-- Wrapper -->
<div id="wrapper">

	<!-- Banner -->
	<section id="intro" class="main">
		<img src="{{image if image_exist else url_for('static', filename='images/profile.jpg')}}" width="250px" height="auto" class="mb-3"
			alt="">
		<h2>{{user.firstname}} {{user.lastname}} {{user.LocalId}}</h2>
		<p>{{user.description}}</p>
		<ul class="actions">
			<li><a href="{{ url_for('modify_profile')}}" class="button big">Modifier mon profil</a></li>
			<li><a href="{{ url_for('delete')}}" class="button big">Supprimer mon compte</a></li>
		</ul>
	</section>


	{# COLLECTION PERSO  
	Il faudra une boucle for quand la BDD sera remplie
	#}

	<div class="container">
		<section class="articles my-5 text-center">
			<div class="row">
				{% for course in courses %}
					{% set id_course = course.id %}
					{% set course = course.to_dict() %}
					<div class="col-12 col-lg-6 col-sm-12">
						<articles>
							<h3 class="mt-5 text-break">{{course['title']}}</h3>
							<h4>{{course['category']}}</h4>
							<div class="metadata">{{course['date'].strftime("%d/%m/%Y Ã  %Hh%M")}}</div>
							<div class="content">
							<embed src={{getPdf(course['image_link'])}} width="auto" height="375">
								<div> {{course['resume']}}</div>
								<div>Note</div>
								<div class="icons">
								<a href="{{ url_for('view_course', id=id_course )}}" class="button big">lire la fiche</a>
								<a href="{{ url_for('delete_course', id=id_course) }}" class="icon fas fa-trash-alt"></a>
								<a href="{{ url_for('modify_course', id=id_course ) }}" class="icon fas fa-edit"></a>
							</div>
							</div>
						</articles>
					</div>
                {% endfor %}
			</div>
		</section>
	</div>


	<!-- Footer -->
	<footer id="footer">
		<ul class="icons">
			<li><a href="#" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
			<li><a href="#" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
			<li><a href="#" class="icon fa-instagram"><span class="label">Instagram</span></a></li>
			<li><a href="#" class="icon fa-linkedin"><span class="label">LinkedIn</span></a></li>
			<li><a href="#" class="icon fa-envelope"><span class="label">Email</span></a></li>
		</ul>

	</footer>

</div>


<!-- DEBUG -->
{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class="flashes">
    {% for message in messages %}
      <li>{{ message }}</li>
    {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

</body>

</html>

{% endblock %}